<html>
<head>
<style>
  body { font-family: "Verdana"; width: 1024px; margin-left: 40px;}
  
  .title { text-align: center; }
  
  .parameters { width: 600px; margin-left: auto; margin-right: auto; }
  
  .results { margin-top: 40px; width: 100%; margin-left: auto; margin-right: auto; }
  
  .result-table { width: 100%; font-size: 12px; text-align: center; }
  
  .result-table th { background-color: #4CAF50; color: white; font-size: 12px; }
  
  .param-table th { text-align: right; width: 50% }
  
  .param-table td { padding-left: 30px; }
  
  .param-table td input { width: 50px; };
  
  .hidden { display: none; }
  
  .unhidden { display: block; }
</style>
<script>
  // variable declaration
  var vfact = 0.00;
  var vdecl = 0.00;
  var pesol = 0.00;
  var imp472 = [ 0.00, 0.00, 0.00 ]; //arancel, IVA, seguro
  var val472 = 0.00;
  var imiecv = [ 0.00, 0.00, 0.00 ]; //arancel, IVA, seguro
  var vaiecv = 0.00;
  var impiec = [ 0.00, 0.00, 0.00 ]; //arancel, IVA, seguro
  var valiec = 0.00;
  var totals = [ 0.00, 0.00, 0.00 ];
</script>
</head>
<body>
<div class="content">
  <div class="header">
    <h1 class="title">Calculadora de Tarifas de Casilleros</h1>
    <p>El prop&oacute;sito de esta herramienta es comparar el valor de un env&iacute;o de casillero entre diferentes proveedores (por ahora solamente 4-72 e IEC Logistic).</p>
  </div>
  <div class="parameters">
    <table class="param-table">
	  <tr>
		<th>Valor facturado (en USD):</th>
		<td colspan="2"><input type="number" min="0.01" max="2000" step="0.01" name="vfact" value="0.01" /></td>
      </tr>
	  <tr>
		<th>Valor declarado (en USD):</th>
		<td><input type="number" name="vdecl" min="0.01" max="2000" step="0.01" value="0.01" disabled></td>
		<td><input type="checkbox" name="vdcheck" checked>Igual</td>
	  </tr>
	  <tr>
	    <th>Peso (en libras):</th>
		<td colspan="2"><input type="number" min="0.01" max="150.00" step="0.01" name="pesol" value="0.01" /></td>
	  </tr>
	  <tr>
		<td colspan="3" style="text-align: center"; id="validation" style="color: red;">&nbsp;</td>
	  </tr>
	  <tr>
		<td colspan="3" style="text-align: center";><button type="button" id="run">Calcular</button></td>
	  </tr>
	</table>
  </div>
  <div class="results">
	<table class="result-table">
		<tr>
			<th>Casillero</th>
			<th>Valor facturado</th>
			<th>Valor declarado</th>
			<th>Peso</th>
			<th>Arancel (10%)</th>
			<th>IVA (19%)</th>
			<th>Seguro</th>
			<th>Valor envio</th>
			<th>Total</th>
		</tr>
		<tr id="results-row-1">
			<td style="font-weight: bold;">4-72</td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr id="results-row-2">
			<td style="font-weight: bold;">IEC</td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
		<tr id="results-row-3">
			<td style="font-weight: bold;">IEC VIP</td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
			<td></td>
		</tr>
	</table>
  </div>
</div>
<script>
	document.getElementsByName('vdcheck')[0].onchange = function() {
		document.getElementsByName('vdecl')[0].disabled = this.checked;
		if (this.checked) {
			document.getElementsByName('vdecl')[0].value = document.getElementsByName('vfact')[0].value;
		}
	};
	
	document.getElementsByName('vfact')[0].onkeyup = function() {
		if (document.getElementsByName('vdcheck')[0].checked) {
			document.getElementsByName('vdecl')[0].value = document.getElementsByName('vfact')[0].value;
		}
	};
	
	document.getElementsByName('vfact')[0].onchange = function() {
		if (document.getElementsByName('vdcheck')[0].checked) {
			document.getElementsByName('vdecl')[0].value = document.getElementsByName('vfact')[0].value;
		}
	};
	
	document.getElementById('run').onclick = function() {
		vfact = document.getElementsByName('vfact')[0].value;
		vdecl = document.getElementsByName('vdecl')[0].value;
		pesol = document.getElementsByName('pesol')[0].value;
		
		//round pesol
		pesol = Math.ceil(pesol);
		
		//calculate 4-72 arancel, IVA
		if (pesol <= 4.40) { imp472[0] = 0.00; imp472[1] = 0.00; }
		else if (vfact <= 200) { imp472[0] = vfact*0.1; imp472[1] = 0.00; }
		else { imp472[0] = vfact*0.1; imp472[1] = vfact*0.19; }
		
		//calculate seguro
		if (vfact > 100) imp472[2] = vfact*0.01;
		else imp472[2] = 0.00;
		
		//calculate shipping cost
		val472 = 5;
		if (pesol <= 4.00) { val472 += ((pesol-1)*3); }
		else { val472 += (9.2+((pesol-4)*2)); }
		
		//calculate total
		totals[0] = val472 + imp472[0] + imp472[1] + imp472[2];
		
		//assign values in table
		document.getElementById("results-row-1").childNodes[3].innerHTML = parseFloat(vfact).toFixed(2);
		document.getElementById("results-row-1").childNodes[5].innerHTML = parseFloat(vfact).toFixed(2);
		document.getElementById("results-row-1").childNodes[7].innerHTML = parseFloat(pesol).toFixed(2);
		document.getElementById("results-row-1").childNodes[9].innerHTML = parseFloat(imp472[0]).toFixed(2);
		document.getElementById("results-row-1").childNodes[11].innerHTML = parseFloat(imp472[1]).toFixed(2);
		document.getElementById("results-row-1").childNodes[13].innerHTML = parseFloat(imp472[2]).toFixed(2);
		document.getElementById("results-row-1").childNodes[15].innerHTML = parseFloat(val472).toFixed(2);
		document.getElementById("results-row-1").childNodes[17].innerHTML = parseFloat(totals[0]).toFixed(2);
		
		//calculate IEC arancel, IVA
		imp472[0] = vdecl*0.1;
		imp472[1] = vdecl <= 200 ? 0.00 : vdecl*0.19;
		imp472[2] = Math.ceil(vdecl/100)*5;
		
		//calculate shipping cost
		val472 = pesol <= 10 ? 17 : 17+(pesol-10)*1.7
		
		//calculate total
		totals[0] = val472 + imp472[0] + imp472[1] + imp472[2];
		
		//assign values in table
		document.getElementById("results-row-2").childNodes[3].innerHTML = parseFloat(vfact).toFixed(2);
		document.getElementById("results-row-2").childNodes[5].innerHTML = parseFloat(vdecl).toFixed(2);
		document.getElementById("results-row-2").childNodes[7].innerHTML = parseFloat(pesol).toFixed(2);
		document.getElementById("results-row-2").childNodes[9].innerHTML = parseFloat(imp472[0]).toFixed(2);
		document.getElementById("results-row-2").childNodes[11].innerHTML = parseFloat(imp472[1]).toFixed(2);
		document.getElementById("results-row-2").childNodes[13].innerHTML = parseFloat(imp472[2]).toFixed(2);
		document.getElementById("results-row-2").childNodes[15].innerHTML = parseFloat(val472).toFixed(2);
		document.getElementById("results-row-2").childNodes[17].innerHTML = parseFloat(totals[0]).toFixed(2);
		
		//calculate IEC VIP arancel, IVA
		imp472[0] = vdecl*0.1;
		imp472[1] = vdecl <= 200 ? 0.00 : vdecl*0.19;
		imp472[2] = Math.ceil(vdecl/100)*5;
		
		//calculate shipping cost
		val472 = pesol <= 10 ? 13 : 13+(pesol-10)*1.3
		
		//calculate total
		totals[0] = val472 + imp472[0] + imp472[1] + imp472[2];
		
		//assign values in table
		document.getElementById("results-row-3").childNodes[3].innerHTML = parseFloat(vfact).toFixed(2);
		document.getElementById("results-row-3").childNodes[5].innerHTML = parseFloat(vdecl).toFixed(2);
		document.getElementById("results-row-3").childNodes[7].innerHTML = parseFloat(pesol).toFixed(2);
		document.getElementById("results-row-3").childNodes[9].innerHTML = parseFloat(imp472[0]).toFixed(2);
		document.getElementById("results-row-3").childNodes[11].innerHTML = parseFloat(imp472[1]).toFixed(2);
		document.getElementById("results-row-3").childNodes[13].innerHTML = parseFloat(imp472[2]).toFixed(2);
		document.getElementById("results-row-3").childNodes[15].innerHTML = parseFloat(val472).toFixed(2);
		document.getElementById("results-row-3").childNodes[17].innerHTML = parseFloat(totals[0]).toFixed(2);
	};
</script>
</body>
</html>